<!DOCTYPE html>
<html class='v3' dir='ltr' lang='en' xmlns='http://www.w3.org/1999/xhtml' xmlns:b='http://www.google.com/2005/gml/b' xmlns:data='http://www.google.com/2005/gml/data' xmlns:expr='http://www.google.com/2005/gml/expr'>
<head>
<meta charset='utf-8'/>
<meta content='width=device-width, initial-scale=1, maximum-scale=1' name='viewport'/>
<meta content='yes' name='apple-mobile-web-app-capable'/> 
<title>zilaNeon PWA</title>
<link rel="manifest" href="manifest.webmanifest"/> 
 <style>
#field {
position: relative; 
max-width: 480px;
width: 90%;
margin-top: 40%; 
margin:0 auto; 
z-index: 99; 
display: none;
visibility: visible !important;}
   
</style>
</head> 
<body>

<fieldset id="field"> <legend>zilaNeon PWA </legend>
<button class="add-button" style="display: block; margin: 5px auto; padding: 10px; font-size: 20px;">Thêm PWA Trên Màn Hình</button> 
<div style="margin:10px auto"> zilaNeon PWA là dễ dàng để bạn lướt trang zilaNeon.</p> </div>
</fieldset> 
zilaNeon PWA là một ứng dụng lối tắc để người dùng dễ dàng quay lại trang website, với tính năng bộ nhớ có sẵn giúp cho lướt web tốt hơn.
 
Khi Thêm zilaNeon PWA sẽ xuất trên màn hình chính. <p> 
 
<div id="eloading" style="background: url(loadng.gif) no-repeat; background-size: 25%; background-position: center; position: fixed; top: 0px; left: 0px; z-index: 99; display: block; width: 100%; height: 100%; visibility: visible !important;"></div>

<script>if ('serviceWorker' in navigator) {
  navigator.serviceWorker
    .register('sw.js')
    .then(() => { console.log('Service Worker Registered'); });
}

let deferredPrompt;
const addBtn = document.querySelector('.add-button');
const anload = document.getElementById("eloading"); 
const fielde = document.getElementById("field"); 

window.addEventListener('beforeinstallprompt', (e) => {

  e.preventDefault();
  deferredPrompt = e;
  fielde.style = 'display: block';
  anload.style = 'display: none';

  addBtn.addEventListener('click', () => {

    fielde.style = 'display: none';
    deferredPrompt.prompt();

   deferredPrompt.userChoice.then((choiceResult) => {
      if (choiceResult.outcome === 'accepted') {
        console.log('User accepted the A2HS prompt'); history.back(); 
      } else {
        console.log('User dismissed the A2HS prompt'); history.back(); 
      }
      deferredPrompt = null;  
    }); 

  }); 

}); </script>
</body></html>
